`use strict`;

const GitRepository = require(`${__dirname}/../GitRepository.js`);
const path = require(`path`);
const fs = require(`fs-extra`);
const os = require(`os`);

const defaultOptions = {
  spaces: 2,
  EOL: os.EOL,
  git: false
};

function constructor(_this, dir, options) {
  _this.options = { ...defaultOptions, ...options };

  // set directory of the storage
  if (dir) {
    _this.dir = path.normalize(dir);
  } else {
    _this.dir = path.normalize(`./storage`);
  }

  // create dir if not exist
  fs.ensureDirSync(_this.dir);

  if(_this.options.git){
    _this.git = new GitRepository(_this.dir);
  }
}

module.exports = constructor;

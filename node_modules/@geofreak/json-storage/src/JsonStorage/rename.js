`use strict`;

const fs = require(`fs-extra`);
const checkDirname = require(`${__dirname}/../helper/checkDirname.js`);
const checkFilename = require(`${__dirname}/../helper/checkFilename.js`);

async function rename(_this, dir, src, dest) {
  checkDirname(dir);
  checkFilename(src);
  checkFilename(dest);

  const srcPath = `${_this.dir}/${dir}/${src}.json`;
  const destPath = `${_this.dir}/${dir}/${dest}.json`;
  await fs.moveSync(srcPath, destPath);

  if (_this.options.git) {
    await _this.git.add(`"${srcPath}" "${destPath}"`);
    await _this.git.commit(
      `"${srcPath}" "${destPath}"`,
      `rename: ${src} -> ${dest}`
    );
  }
}

module.exports = rename;

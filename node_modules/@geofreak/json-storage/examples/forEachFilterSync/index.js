`use strict`;

const JsonStorage = require(`${__dirname}/../../index.js`);

// init storage
const store = new JsonStorage(`${__dirname}/storage`);

// define a filter
function filter(json, file) {
  if (json.name.startsWith(`T`) && file.startsWith(`user`)) {
    return true;
  } else {
    return false;
  }
}

// iterate over all filtered files
store.forEachSync(`users`, (json, file) => {
  console.log(`${file}: ${json.name}`);
}, filter);
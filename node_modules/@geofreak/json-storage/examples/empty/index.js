`use strict`;

const JsonStorage = require(`${__dirname}/../../index.js`);

// init storage
const store = new JsonStorage(`${__dirname}/storage`);

(async () => {
  // write files
  console.log(`write files ...`);
  await store.set(`users`, `user001`, {
    name: `Thomas`
  });
  await store.set(`users`, `user002`, {
    name: `Tom`
  });
  await store.set(`users`, `user003`, {
    name: `Jens`
  });
  await store.set(`cars`, `car001`, {
    name: `Volkswagen`
  });
  await store.set(`cars`, `car002`, {
    name: `Audi`
  });
  await store.set(`cars`, `car003`, {
    name: `Seat`
  });

  console.log(`wait 5 seconds ...`);
  setTimeout(async () => {

    console.log(`empty cars directory ...`);
    await store.empty(`cars`);

    console.log(`wait 5 seconds ...`);
    setTimeout(async () => {
      console.log(`empty storage ...`);
      await store.empty();
    }, 5000);
    
  }, 5000);
})();

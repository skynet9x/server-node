`use strict`;

const JsonStorage = require(`${__dirname}/../../index.js`);

// init storage
const store = new JsonStorage(`${__dirname}/storage`);

console.log(`write files ...`);
store.setSync(`users`, `user001`, {
  name: `Thomas`
});
store.setSync(`users`, `user002`, {
  name: `Tom`
});
store.setSync(`users`, `user003`, {
  name: `Jens`
});
store.setSync(`cars`, `car001`, {
  name: `Volkswagen`
});
store.setSync(`cars`, `car002`, {
  name: `Audi`
});
store.setSync(`cars`, `car003`, {
  name: `Seat`
});

console.log(`wait 5 seconds ...`);
setTimeout(() => {
  console.log(`empty cars directory ...`);
  store.emptySync(`cars`);

  console.log(`wait 5 seconds ...`);
  setTimeout(() => {
    console.log(`empty storage ...`);
    store.emptySync();

  }, 5000);
}, 5000);
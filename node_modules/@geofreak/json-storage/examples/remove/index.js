`use strict`;

const JsonStorage = require(`${__dirname}/../../index.js`);

// init storage
const store = new JsonStorage(`${__dirname}/storage`);

(async () => {
  console.log(`write files ...`);
  await store.set(`users`, `user001`, {
    name: `Thomas`
  });
  await store.set(`users`, `user002`, {
    name: `Tom`
  });
  await store.set(`cars`, `car001`, {
    name: `Volkswagen`
  });
  await store.set(`cars`, `car002`, {
    name: `Daihatsu`
  });

  console.log(`wait 5 seconds ...`);
  setTimeout(async () => {
    console.log(`remove file ...`);
    await store.remove(`cars`, `car001`);

    console.log(`remove dir ...`);
    await store.remove(`users`);
  }, 5000);
})();

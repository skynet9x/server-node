`use strict`;

const JsonStorage = require(`${__dirname}/../../index.js`);

// init storage
const store = new JsonStorage(`${__dirname}/storage`);

(async ()=>{
  console.log(`write files ...`);
  await store.set(`users`, `user001`, {
    name: `Thomas`
  });
  await store.set(`users`, `user002`, {
    name: `Tom`
  });
  await store.set(`cars`, `car001`, {
    name: `Volkswagen`
  });
  await store.set(`cars`, `car002`, {
    name: `Mercedes`
  });
  
  console.log(`wait 5 seconds ...`);
  setTimeout(async () => {
  
    console.log(`rename file ...`);
    await store.rename(`users`, `user001`, `user999`);
  
    console.log(`rename dir ...`);
    await store.rename(`cars`, `mycars`);
  
  }, 5000);
})();
